{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-2172adb84442f95b.js","src/js/script-shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-4d72bc8477050f69.js","node_modules/@parcel/runtime-js/lib/runtime-361070f63fb5deb1.js","node_modules/@parcel/runtime-js/lib/runtime-f43804e610e291ac.js","node_modules/@parcel/runtime-js/lib/runtime-6b9dee0fc9ba4fc8.js","node_modules/@parcel/runtime-js/lib/runtime-332a1c4920575761.js","node_modules/@parcel/runtime-js/lib/runtime-9489bd37b5f7df61.js","node_modules/@parcel/runtime-js/lib/runtime-a799bd073b85539b.js","node_modules/@parcel/runtime-js/lib/runtime-0a51626a173ecec6.js","node_modules/@parcel/runtime-js/lib/runtime-44e7bd74d9a8b620.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9bx4\\\":\\\"shopping-list.032f2d3d.js\\\",\\\"8DrZi\\\":\\\"empty.e85449c5.png\\\",\\\"lHxGi\\\":\\\"empty@2x.0c63d3b6.png\\\",\\\"azb7q\\\":\\\"amazon.06fa7713.png\\\",\\\"fS0QX\\\":\\\"amazon@2x.4eae58f9.png\\\",\\\"lLZQs\\\":\\\"book.57ecc8dc.png\\\",\\\"7W0St\\\":\\\"book@2x.c5385d25.png\\\",\\\"68qT8\\\":\\\"book-shop.e5effbae.png\\\",\\\"5K0oH\\\":\\\"book-shop@2.3b8922c8.png\\\",\\\"8OQ7p\\\":\\\"icons.89706b70.svg\\\",\\\"etMPu\\\":\\\"shopping-list.9240bb3e.css\\\",\\\"a8cj2\\\":\\\"shopping-list.619974a1.js\\\"}\"));","import { booksId } from './apiBooks';\nimport emptybooks from '../images/shopping-list/empty.png';\nimport emptybooks2x from '../images/shopping-list/empty@2x.png';\nimport amazon from '../images/partners/amazon.png';\nimport amazon2x from '../images/partners/amazon@2x.png';\nimport apple from '../images/partners/book.png';\nimport apple2x from '../images/partners/book@2x.png';\nimport bookShop from '../images/partners/book-shop.png';\nimport bookShop2x from '../images/partners/book-shop@2.png';\nimport icons from '../images/icons.svg';\nconst LOCAL_KEY = 'booksID';\nasync function ShoppingListPageMarkup() {\n  const shoppingListPageView = document.querySelector(\n    '.shopping-list-page-view'\n  );\n  const value = localStorage.getItem(LOCAL_KEY);\n  const idsFromLocalStorage = JSON.parse(value);\n  if (value === null || idsFromLocalStorage.length === 0) {\n    const markup = `<div class=\"shoplist-list-background\">\n        <p class=\"shoplist-background-text\">\n        This page is empty, add some books and proceed to order.</p>\n        <img src='${emptybooks}' srcset=\"${emptybooks} 1x, ${emptybooks2x} 2x\" alt ='Empty books'> </div>`;\n    shoppingListPageView.insertAdjacentHTML('beforeend', markup);\n  } else {\n    console.log(idsFromLocalStorage);\n    let page = 1;\n    let pageSize = 3;\n    const numberOfPages = Math.ceil(idsFromLocalStorage.length / 3);\n    console.log(numberOfPages);\n    renderPagination(numberOfPages);\n    renderBookItems(idsFromLocalStorage, page);\n    function renderPagination(numberOfPages) {\n      if (numberOfPages === 1) {\n        return;\n      } else {\n        const paginationBtn = document.querySelector('.pagination-btn');\n        let pagination = '';\n        for (let i = 1; i <= numberOfPages; i++) {\n          const pageBtn = `<button type='button' class='page-btn' data-page=${i} on-click=\"activeBtn()\"> ${i} </button>`;\n          pagination = pagination.concat(pageBtn);\n        }\n        const markupBtn = `\n                <button type='button' class='prev-btn'> < </button>\n                ${pagination}\n                <button type='button' class='next-btn'> > </button>\n                `;\n        paginationBtn.innerHTML = markupBtn;\n        changeActivePage(paginationBtn, page);\n        paginationBtn\n          .querySelector('.prev-btn')\n          .addEventListener('click', () => {\n            if (page !== 1) {\n              const currentPage = page - 1;\n              changeActivePage(paginationBtn, currentPage);\n              page = currentPage;\n              renderBookItems(idsFromLocalStorage, currentPage);\n            }\n          });\n        paginationBtn\n          .querySelector('.next-btn')\n          .addEventListener('click', () => {\n            if (page !== numberOfPages) {\n              const currentPage = page + 1;\n              changeActivePage(paginationBtn, currentPage);\n              page = currentPage;\n              renderBookItems(idsFromLocalStorage, currentPage);\n            }\n          });\n        paginationBtn.querySelectorAll('.page-btn').forEach(btn => {\n          btn.addEventListener('click', () => {\n            const currentPage = Number(btn.dataset.page);\n            changeActivePage(paginationBtn, currentPage);\n            page = currentPage;\n            renderBookItems(idsFromLocalStorage, currentPage);\n          });\n        });\n      }\n    }\n    function renderBookItems(idsFromLocalStorage, page, btn) {\n      shoppingListPageView.innerHTML = '';\n      const end = page * pageSize;\n      const start = end - pageSize;\n      const onePage = idsFromLocalStorage.slice(start, end);\n      console.log(onePage);\n      const shoppongListBooks = onePage.forEach(async id => {\n        const books = await booksId(id);\n        console.log(books);\n        const markup = bookInfoMarkup(books);\n        shoppingListPageView.insertAdjacentHTML('beforeend', markup);\n        addDeleteHandler(id);\n      });\n      function bookInfoMarkup({\n        _id,\n        book_image,\n        title,\n        author,\n        description,\n        buy_links,\n      }) {\n        const amazonUrl = buy_links[0].url;\n        const appleUrl = buy_links[1].url;\n        const bookShopUrl = buy_links[0].url;\n        return `\n            <div class=\"shoplist-item\">\n                <div class=\"book-container\">\n                    <div class=\"book-img-container\">\n                         <img class='book-img' src=\"${\n                           book_image\n                             ? book_image\n                             : './src/images/without-Image/noImage-Large.png'\n                         }\" alt='Book image'>\n            </div>\n        <div class='book-descr-inf'>\n        <p class='book-title'>${title ? title : 'No title.'}</p>\n        <p class='book-author'>${author ? author : 'No author.'}</p>\n        <p class='book-description-shoplist'>${\n          description ? description : 'No description.'\n        }</p>\n                </div>\n        <div class='links-group'>\n        <a href=${amazonUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${amazon}' srcset=\"${amazon} 1x, ${amazon2x} 2x\" alt ='Amazon Icon'></a>\n        <a href=${appleUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${apple}' srcset=\"${apple} 1x, ${apple2x} 2x\" alt ='Apple Icon'></a>\n        <a href=${bookShopUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${bookShop}' srcset=\"${bookShop} 1x, ${bookShop2x} 2x\" alt ='Book Shop Icon'></a>\n        </div>\n        <button class='deliteBookFromShopList 'data-name='${_id}' type='button'>\n        <svg class=\"trash-btn__icon\" width=\"28\" height=\"28\">\n        <use href=\"${icons}#delete-book\"></use>\n      </svg>\n       </button>\n        </div>\n        </div>\n       `;\n      }\n    }\n    function addDeleteHandler(id) {\n      const deleteBtn = document.querySelector(`[data-name=\"${id}\"]`);\n      deleteBtn.addEventListener('click', () => deliteBookFromShopingList(id));\n    }\n    function deliteBookFromShopingList(bookIdForDelite) {\n      console.log('this', bookIdForDelite);\n      const idsInLocalStarage = JSON.parse(localStorage.getItem(LOCAL_KEY));\n      console.log(idsInLocalStarage);\n      const deliteID = idsInLocalStarage.filter(id => id !== bookIdForDelite);\n      console.log('array', deliteID);\n      const newLocalStorage = localStorage.setItem(\n        LOCAL_KEY,\n        JSON.stringify(deliteID)\n      );\n      location.reload();\n    }\n    function changeActivePage(paginationBtn, currentPage) {\n      const activePageBtn = paginationBtn.querySelector('.page-btn-active');\n      if (activePageBtn) {\n        activePageBtn.classList.remove('page-btn-active');\n      }\n      paginationBtn\n        .querySelector(`[data-page=\"${currentPage}\"]`)\n        .classList.add('page-btn-active');\n    }\n  }\n}\nShoppingListPageMarkup();\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8DrZi\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lHxGi\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"azb7q\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fS0QX\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lLZQs\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7W0St\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"68qT8\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5K0oH\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8OQ7p\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$1X6yp","$7bed694ef1580b4a$exports","URL","resolve","import","meta","url","toString","$feba979dcc338be8$exports","$cca386eea4e4f9fb$exports","$f29d469ba5a39f9d$exports","$5a96558ac3e49cf6$exports","$47859cc8471de495$exports","$cc7c4c6d145696d1$exports","$de056baf34fd0a20$exports","$e27edc6dc33d0133$exports","async","shoppingListPageView","document","querySelector","value","localStorage","getItem","idsFromLocalStorage1","markup","$parcel$interopDefault","insertAdjacentHTML","console","log","page1","pageSize","numberOfPages1","Math","ceil","renderBookItems","idsFromLocalStorage","page","btn","innerHTML","end","start","onePage","slice","forEach","books","booksId","_id","book_image","title","author","description","buy_links","amazonUrl","appleUrl","bookShopUrl","bookInfoMarkup","addEventListener","bookIdForDelite","idsInLocalStarage","deliteID","filter","setItem","stringify","location","reload","deliteBookFromShopingList","addDeleteHandler","changeActivePage","paginationBtn","currentPage","activePageBtn","classList","remove","add","numberOfPages","pagination","pageBtn","concat","markupBtn","querySelectorAll","Number","dataset","renderPagination","$6d6839d600159769$var$ShoppingListPageMarkup"],"version":3,"file":"shopping-list.032f2d3d.js.map"}