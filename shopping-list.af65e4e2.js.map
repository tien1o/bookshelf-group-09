{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-52fd04954a3ab089.js","src/js/script-shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-cfae6b2aa6b70651.js","node_modules/@parcel/runtime-js/lib/runtime-44e66f1330db17a3.js","node_modules/@parcel/runtime-js/lib/runtime-0ae823f5b6f14b1a.js","node_modules/@parcel/runtime-js/lib/runtime-940c2bfa8b5411b9.js","node_modules/@parcel/runtime-js/lib/runtime-560f55fe96a41c3d.js","node_modules/@parcel/runtime-js/lib/runtime-09f8f6a7302a88d6.js","node_modules/@parcel/runtime-js/lib/runtime-370c3ae687f01ad9.js","node_modules/@parcel/runtime-js/lib/runtime-4347f2522f957e23.js","node_modules/@parcel/runtime-js/lib/runtime-2553bc45f810d20c.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jSFKT\\\":\\\"shopping-list.af65e4e2.js\\\",\\\"iPMid\\\":\\\"empty.e85449c5.png\\\",\\\"9D2Qv\\\":\\\"empty@2x.0c63d3b6.png\\\",\\\"dTkHT\\\":\\\"amazon.06fa7713.png\\\",\\\"hyzQv\\\":\\\"amazon@2x.4eae58f9.png\\\",\\\"fnrpS\\\":\\\"book.57ecc8dc.png\\\",\\\"bS23T\\\":\\\"book@2x.c5385d25.png\\\",\\\"dGKkA\\\":\\\"book-shop.e5effbae.png\\\",\\\"6mEwM\\\":\\\"book-shop@2.3b8922c8.png\\\",\\\"410VS\\\":\\\"icons.375e7e79.svg\\\",\\\"5UbS1\\\":\\\"index.4d642a4d.css\\\",\\\"cfiU8\\\":\\\"index.6f67fe91.js\\\"}\"));","import { booksId } from './apiBooks';\nimport emptybooks from '../images/shopping-list/empty.png';\nimport emptybooks2x from '../images/shopping-list/empty@2x.png';\nimport amazon from '../images/partners/amazon.png';\nimport amazon2x from '../images/partners/amazon@2x.png';\nimport apple from '../images/partners/book.png';\nimport apple2x from '../images/partners/book@2x.png';\nimport bookShop from '../images/partners/book-shop.png';\nimport bookShop2x from '../images/partners/book-shop@2.png';\nimport icons from '../images/icons.svg';\n\nconst LOCAL_KEY = 'booksID';\n\nasync function ShoppingListPageMarkup() {\n    const shoppingListPageView = document.querySelector(\n        '.shopping-list-page-view'\n    );\n\n    const value = localStorage.getItem(LOCAL_KEY);\n    const idsFromLocalStorage = JSON.parse(value);\n    \n    if (value === null || idsFromLocalStorage.length === 0) {\n        const markup = \n        `<div class=\"shoplist-list-background\">\n        <p class=\"shoplist-background-text\">\n        This page is empty, add some books and proceed to order.</p> \n        <img src='${emptybooks}' srcset=\"${emptybooks} 1x, ${emptybooks2x} 2x\" alt ='Empty books'> </div>`;\n        shoppingListPageView.insertAdjacentHTML('beforeend', markup);\n    } else {\n        console.log(idsFromLocalStorage);\n\n    let page = 1;\n    let pageSize = 3;\n    const numberOfPages = Math.ceil(idsFromLocalStorage.length / 3);\n    console.log(numberOfPages);\n    renderPagination(numberOfPages);\n    renderBookItems(idsFromLocalStorage, page);\n\n    function renderPagination(numberOfPages) {\n      if (numberOfPages === 1) {\n        return;\n      } else {\n        const paginationBtn = document.querySelector('.pagination-btn');\n        let pagination = '';\n        for (let i = 1; i <= numberOfPages; i++) {\n          const pageBtn = `<button type='button' class='page-btn' data-page=${i}> ${i} </button>`;\n          pagination = pagination.concat(pageBtn);\n        }\n        const markupBtn = `\n                <button type='button' class='prev-btn'> < </button>\n                ${pagination}\n                <button type='button' class='next-btn'> > </button>\n              \n                `;\n        paginationBtn.innerHTML = markupBtn;\n        paginationBtn\n          .querySelector('.prev-btn')\n          .addEventListener('click', () => {\n            if (page !== 1) {\n              const currentPage = page - 1;\n              page = currentPage;\n              renderBookItems(idsFromLocalStorage, currentPage);\n            }\n          });\n        paginationBtn\n          .querySelector('.next-btn')\n          .addEventListener('click', () => {\n            if (page !== numberOfPages) {\n              const currentPage = page + 1;\n              page = currentPage;\n              renderBookItems(idsFromLocalStorage, currentPage);\n            }\n          });\n        paginationBtn.querySelectorAll('.page-btn').forEach(btn => {\n          btn.addEventListener('click', () => {\n            const currentPage = Number(btn.dataset.page);\n            page = currentPage;\n            renderBookItems(idsFromLocalStorage, currentPage);\n          });\n        });\n      }\n    }\n\n    function renderBookItems(idsFromLocalStorage, page) {\n      shoppingListPageView.innerHTML = '';\n      const end = page * pageSize;\n      const start = end - pageSize;\n      const onePage = idsFromLocalStorage.slice(start, end);\n      console.log(onePage);\n      const shoppongListBooks = onePage.forEach(async id => {\n            const books = await booksId(id);\n            console.log(books);\n            const markup = bookInfoMarkup(books);\n            shoppingListPageView.insertAdjacentHTML('beforeend', markup);\n            addDeleteHandler(id);\n        });\n\n        function bookInfoMarkup({\n            _id,\n            book_image,\n            title,\n            author,\n            description,\n            buy_links,\n        }) {\n            const amazonUrl = buy_links[0].url;\n            const appleUrl = buy_links[1].url;\n            const bookShopUrl = buy_links[0].url;\n            return `\n            <div class=\"shoplist-item\">\n                <div class=\"book-container\">\n                    <div class=\"book-img-container\">\n                         <img class='book-img' src=\"${book_image\n                         ? book_image\n                          : './src/images/without-Image/noImage-Large.png'\n                            }\" alt='Book image'>\n            </div>\n        <div class='book-descr-inf'>\n        <p class='book-title'>${title ? title : 'No title.'}</p>\n        <p class='book-author'>${author ? author : 'No author.'}</p>\n        <p class='book-description-shoplist'>${description ? description : 'No description.'\n                }</p>\n                </div>\n        <div class='links-group'>\n        <a href=${amazonUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${amazon}' srcset=\"${amazon} 1x, ${amazon2x} 2x\" alt ='Amazon Icon'></a>\n        <a href=${appleUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${apple}' srcset=\"${apple} 1x, ${apple2x} 2x\" alt ='Apple Icon'></a>\n        <a href=${bookShopUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${bookShop}' srcset=\"${bookShop} 1x, ${bookShop2x} 2x\" alt ='Book Shop Icon'></a>\n        </div>\n        <button class='deliteBookFromShopList 'data-name='${_id}' type='button'> \n        <svg class=\"trash-btn__icon\" width=\"28\" height=\"28\">\n        <use href=\"${icons}#delete-book\"></use>\n      </svg>\n        \n       </button>\n        \n        </div>\n        </div>\n       `;\n        }\n    }\n\n       function addDeleteHandler(id) {\n      const deleteBtn = document.querySelector(`[data-name=\"${id}\"]`);\n      deleteBtn.addEventListener('click', () => deliteBookFromShopingList(id));\n    }\n    \n    function deliteBookFromShopingList(bookIdForDelite) {\n      console.log('this', bookIdForDelite);\n      const idsInLocalStarage = JSON.parse(localStorage.getItem(LOCAL_KEY));\n      console.log(idsInLocalStarage);\n      const deliteID = idsInLocalStarage.filter(id => id !== bookIdForDelite);\n      console.log('array', deliteID);\n      const newLocalStorage = localStorage.setItem(\n        LOCAL_KEY,\n        JSON.stringify(deliteID)\n      );\n      location.reload();\n    }\n  }\n}\nShoppingListPageMarkup();\n\n\n","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"iPMid\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"9D2Qv\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"dTkHT\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"hyzQv\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"fnrpS\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"bS23T\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"dGKkA\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"6mEwM\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"410VS\");"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$ae93ac71dffb2662$exports","getBundleURL","resolve","$af2f28455afb8923$exports","$d9838d1ec4161a68$exports","$41f068a61eab178d$exports","$2b9ea7fb6683c564$exports","$36ccb301a405af05$exports","$97f4472a589935a4$exports","$d1144c10f1780b3e$exports","$1fac8f97b5ca9133$exports","$ccd8a3aa9cf007e8$var$LOCAL_KEY","$ccd8a3aa9cf007e8$var$_ShoppingListPageMarkup","$parcel$interopDefault","$2TvXO","mark","_callee1","shoppingListPageView","value","idsFromLocalStorage1","markup1","page1","pageSize","numberOfPages1","renderPagination","renderBookItems","addDeleteHandler","deliteBookFromShopingList","numberOfPages","paginationBtn","document","querySelector","pagination","i","pageBtn","concat","markupBtn","innerHTML","addEventListener","currentPage","querySelectorAll","forEach","btn","Number","dataset","page","idsFromLocalStorage","end","start","onePage","slice","console","log","_callee","id","books","markup","$6fhvM","booksId","_ctx","sent","_id","book_image","title","author","description","buy_links","amazonUrl","appleUrl","bookShopUrl","param","url","insertAdjacentHTML","bookIdForDelite","idsInLocalStarage","localStorage","getItem","deliteID","filter","setItem","stringify","location","reload","length","Math","ceil","apply","this","arguments","$ccd8a3aa9cf007e8$var$ShoppingListPageMarkup"],"version":3,"file":"shopping-list.af65e4e2.js.map"}