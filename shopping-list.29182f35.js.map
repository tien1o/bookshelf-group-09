{"mappings":"8pBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,uCC2BT,IAAAE,E,6EA5CA,IAAIC,EAAY,GA6BhB,SAASC,EAAWC,GAClB,OAAQ,GAAKA,GAAKC,QAAO,+DAAiE,MAAQ,G,CAcpGJ,EA1CA,SAA4BH,GAC1B,IAAIQ,EAAQJ,EAAUJ,GAOtB,OALKQ,IACHA,EAOJ,WACE,IACE,MAAM,IAAIN,K,CACV,MAAOO,GACP,IAAIC,GAAW,GAAKD,EAAIE,OAAOC,MAAK,yDAEpC,GAAIF,EAGF,OAAOL,EAAWK,EAAQ,G,CAI9B,MAAO,G,CApBGG,GACRT,EAAUJ,GAAMQ,GAGXA,C,KCZTM,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,ulBCAzD,I,EAAAC,EAAAJ,EAAA,S,0BCAAK,EAAiBL,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,MCAtHC,EAAiBR,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,MCAtHE,EAAiBT,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,MCAtHG,EAAiBV,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,MCAtHI,EAAiBX,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,MCAtHK,EAAiBZ,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,MCAtHM,EAAiBb,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,MCAtHO,EAAiBd,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,S,MCAtHQ,EAAiBf,EAAA,SAAAM,aAA6C,SAAWN,EAAA,SAAAO,QAA6C,STWtH,IAAMS,EAAY,U,SAEHC,I,OAAAA,EAAfC,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,I,IACUC,EAIA5B,EACA6B,EAGIC,EASNC,EACAC,EACEC,EAKGC,EA6CAC,EA0DGC,EAKHC,E,kEA5GTH,EAAA,SAA0BI,GACxB,GAAsB,IAAlBA,EAAJ,CAKE,IAFA,IAAMC,EAAgBC,SAASC,cAAc,mBACzCC,EAAa,GACRpD,EAAI,EAAGA,GAAKgD,EAAehD,IAAK,CACvC,IAAMqD,EAAU,oDAA0DC,OAANtD,EAAE,MAAMsD,OAAFtD,EAAE,cAC5EoD,EAAaA,EAAWE,OAAOD,E,CAEjC,IAAME,EAAY,0FAEGD,OAAXF,EAAW,2GAIrBH,EAAcO,UAAYD,EAC1BN,EACGE,cAAc,aACdM,iBAAiB,SAAS,WACzB,GAAa,IAAThB,EAAY,CACd,IAAMiB,EAAcjB,EAAO,EAC3BA,EAAOiB,EACPb,EAAgBN,EAAqBmB,E,KAG3CT,EACGE,cAAc,aACdM,iBAAiB,SAAS,WACzB,GAAIhB,IAASO,EAAe,CAC1B,IAAMU,EAAcjB,EAAO,EAC3BA,EAAOiB,EACPb,EAAgBN,EAAqBmB,E,KAG3CT,EAAcU,iBAAiB,aAAaC,SAAQ,SAAAC,GAClDA,EAAIJ,iBAAiB,SAAS,WAC5B,IAAMC,EAAcI,OAAOD,EAAIE,QAAQC,MACvCvB,EAAOiB,EACPb,EAAgBN,EAAqBmB,E,SAM7Cb,EAAA,SAAyBoB,EAAqBD,GAC5C1B,EAAqBkB,UAAY,GACjC,IAAMU,EAAMF,EAAOtB,EACbyB,EAAQD,EAAMxB,EACd0B,EAAUH,EAAoBI,MAAMF,EAAOD,GACjDI,QAAQC,IAAIH,GACZ,I,EAA0BA,EAAQR,S,EAAQ1B,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAoC,EAAMtE,G,IACpCuE,EAEAC,E,mFAFc,EAAAC,EAAAC,SAAQ1E,G,OAAtBuE,EAAKI,EAAAC,KACXR,QAAQC,IAAIE,GAOZM,SACAC,SACAC,SACAC,SACAC,SACAC,SAEMC,SACAC,SACAC,SATNR,GADoBS,EALUf,GAM9BM,IACAC,EAFoBQ,EAEpBR,WACAC,EAHoBO,EAGpBP,MACAC,EAJoBM,EAIpBN,OACAC,EALoBK,EAKpBL,YACAC,EANoBI,EAMpBJ,UAEMC,EAAYD,EAAU,GAAG5E,IACzB8E,EAAWF,EAAU,GAAG5E,IACxB+E,EAAcH,EAAU,GAAG5E,IAf3BkE,EAgBC,wMAUapB,OANsB0B,GAE1B,+CACC,kHAII1B,OADD2B,GAAgB,YAAY,yCAEb3B,OADd4B,GAAkB,aAAa,uDAK9C5B,OAJ6B6B,GAA4B,kBAC1D,qFAGsE7B,OAArE+B,EAAU,+DAA8E/B,OAAnBpB,EAAAT,GAAO,eAA0B6B,OAAdpB,EAAAT,GAAO,SAC/F6B,OADsGpB,EAAAR,GAAS,mDAC3C4B,OAApEgC,EAAS,+DAA6EhC,OAAlBpB,EAAAP,GAAM,eAAyB2B,OAAbpB,EAAAP,GAAM,SAC5F2B,OADmGpB,EAAAN,GAAQ,kDACpC0B,OAAvEiC,EAAY,+DAAgFjC,OAArBpB,EAAAL,GAAS,eAA4ByB,OAAhBpB,EAAAL,GAAS,SAE3DyB,OAFkEpB,EAAAJ,GAAW,gHAIpHwB,OAFuCyB,EAAI,2GAErCzB,OAANpB,EAAAH,GAAM,qHArCfO,EAAqBmD,mBAAmB,YAAaf,GACrD5B,EAAiB5C,G,iCAGrB,IAAwBsF,EACpBT,EACAC,EACAC,EACAC,EACAC,EACAC,EAEMC,EACAC,EACAC,C,mBAlBoCrF,G,mCAoD/C4C,EAAA,SAA0B5C,GACTgD,SAASC,cAAc,eAAkBG,OAAHpD,EAAG,OACjDuD,iBAAiB,SAAS,W,OAAMV,EAA0B7C,E,KAGtE6C,EAAA,SAAmC2C,GACjCpB,QAAQC,IAAI,OAAQmB,GACpB,IAAMC,EAAoBzE,KAAKC,MAAMyE,aAAaC,QAAQ7D,IAC1DsC,QAAQC,IAAIoB,GACZ,IAAMG,EAAWH,EAAkBI,QAAO,SAAA7F,G,OAAMA,IAAOwF,C,IACvDpB,QAAQC,IAAI,QAASuB,GACGF,aAAaI,QACnChE,EACAd,KAAK+E,UAAUH,IAEjBI,SAASC,Q,EA9IL7D,EAAuBY,SAASC,cAClC,4BAGEzC,EAAQkF,aAAaC,QAAQ7D,GAC7BO,EAAsBrB,KAAKC,MAAMT,GAEzB,OAAVA,GAAiD,IAA/B6B,EAAoBtC,QAChCuC,EACN,mLAGmCc,OAAvBpB,EAAAb,GAAW,eAA8BiC,OAAlBpB,EAAAb,GAAW,SAAoBiC,OAAbpB,EAAAV,GAAa,oCAClEc,EAAqBmD,mBAAmB,YAAajD,KAErD8B,QAAQC,IAAIhC,GAEZE,EAAO,EACPC,EAAW,EACTC,EAAgByD,KAAKC,KAAK9D,EAAoBtC,OAAS,GAC7DqE,QAAQC,IAAI5B,GACZC,EAAiBD,GACjBE,EAAgBN,EAAqBE,I,2CAvB1BR,EAAsBqE,MAAAC,KAAAC,U,aAAtBvE,EAAsBqE,MAAAC,KAAAC,U,CAmJrCC,G","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-f3aca507b4a6618b.js","src/js/script-shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-cfae6b2aa6b70651.js","node_modules/@parcel/runtime-js/lib/runtime-44e66f1330db17a3.js","node_modules/@parcel/runtime-js/lib/runtime-0ae823f5b6f14b1a.js","node_modules/@parcel/runtime-js/lib/runtime-940c2bfa8b5411b9.js","node_modules/@parcel/runtime-js/lib/runtime-560f55fe96a41c3d.js","node_modules/@parcel/runtime-js/lib/runtime-09f8f6a7302a88d6.js","node_modules/@parcel/runtime-js/lib/runtime-370c3ae687f01ad9.js","node_modules/@parcel/runtime-js/lib/runtime-4347f2522f957e23.js","node_modules/@parcel/runtime-js/lib/runtime-2553bc45f810d20c.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jSFKT\\\":\\\"shopping-list.29182f35.js\\\",\\\"iPMid\\\":\\\"empty.e85449c5.png\\\",\\\"9D2Qv\\\":\\\"empty@2x.0c63d3b6.png\\\",\\\"dTkHT\\\":\\\"amazon.06fa7713.png\\\",\\\"hyzQv\\\":\\\"amazon@2x.4eae58f9.png\\\",\\\"fnrpS\\\":\\\"book.57ecc8dc.png\\\",\\\"bS23T\\\":\\\"book@2x.c5385d25.png\\\",\\\"dGKkA\\\":\\\"book-shop.e5effbae.png\\\",\\\"6mEwM\\\":\\\"book-shop@2.3b8922c8.png\\\",\\\"410VS\\\":\\\"icons.375e7e79.svg\\\",\\\"etMPu\\\":\\\"shopping-list.5387465d.css\\\",\\\"01IoP\\\":\\\"shopping-list.1aa6a045.js\\\"}\"));","import { booksId } from './apiBooks';\nimport emptybooks from '../images/shopping-list/empty.png';\nimport emptybooks2x from '../images/shopping-list/empty@2x.png';\nimport amazon from '../images/partners/amazon.png';\nimport amazon2x from '../images/partners/amazon@2x.png';\nimport apple from '../images/partners/book.png';\nimport apple2x from '../images/partners/book@2x.png';\nimport bookShop from '../images/partners/book-shop.png';\nimport bookShop2x from '../images/partners/book-shop@2.png';\nimport icons from '../images/icons.svg';\n\nconst LOCAL_KEY = 'booksID';\n\nasync function ShoppingListPageMarkup() {\n    const shoppingListPageView = document.querySelector(\n        '.shopping-list-page-view'\n    );\n\n    const value = localStorage.getItem(LOCAL_KEY);\n    const idsFromLocalStorage = JSON.parse(value);\n    \n    if (value === null || idsFromLocalStorage.length === 0) {\n        const markup = \n        `<div class=\"shoplist-list-background\">\n        <p class=\"shoplist-background-text\">\n        This page is empty, add some books and proceed to order.</p> \n        <img src='${emptybooks}' srcset=\"${emptybooks} 1x, ${emptybooks2x} 2x\" alt ='Empty books'> </div>`;\n        shoppingListPageView.insertAdjacentHTML('beforeend', markup);\n    } else {\n        console.log(idsFromLocalStorage);\n\n    let page = 1;\n    let pageSize = 3;\n    const numberOfPages = Math.ceil(idsFromLocalStorage.length / 3);\n    console.log(numberOfPages);\n    renderPagination(numberOfPages);\n    renderBookItems(idsFromLocalStorage, page);\n\n    function renderPagination(numberOfPages) {\n      if (numberOfPages === 1) {\n        return;\n      } else {\n        const paginationBtn = document.querySelector('.pagination-btn');\n        let pagination = '';\n        for (let i = 1; i <= numberOfPages; i++) {\n          const pageBtn = `<button type='button' class='page-btn' data-page=${i}> ${i} </button>`;\n          pagination = pagination.concat(pageBtn);\n        }\n        const markupBtn = `\n                <button type='button' class='prev-btn'> < </button>\n                ${pagination}\n                <button type='button' class='next-btn'> > </button>\n              \n                `;\n        paginationBtn.innerHTML = markupBtn;\n        paginationBtn\n          .querySelector('.prev-btn')\n          .addEventListener('click', () => {\n            if (page !== 1) {\n              const currentPage = page - 1;\n              page = currentPage;\n              renderBookItems(idsFromLocalStorage, currentPage);\n            }\n          });\n        paginationBtn\n          .querySelector('.next-btn')\n          .addEventListener('click', () => {\n            if (page !== numberOfPages) {\n              const currentPage = page + 1;\n              page = currentPage;\n              renderBookItems(idsFromLocalStorage, currentPage);\n            }\n          });\n        paginationBtn.querySelectorAll('.page-btn').forEach(btn => {\n          btn.addEventListener('click', () => {\n            const currentPage = Number(btn.dataset.page);\n            page = currentPage;\n            renderBookItems(idsFromLocalStorage, currentPage);\n          });\n        });\n      }\n    }\n\n    function renderBookItems(idsFromLocalStorage, page) {\n      shoppingListPageView.innerHTML = '';\n      const end = page * pageSize;\n      const start = end - pageSize;\n      const onePage = idsFromLocalStorage.slice(start, end);\n      console.log(onePage);\n      const shoppongListBooks = onePage.forEach(async id => {\n            const books = await booksId(id);\n            console.log(books);\n            const markup = bookInfoMarkup(books);\n            shoppingListPageView.insertAdjacentHTML('beforeend', markup);\n            addDeleteHandler(id);\n        });\n\n        function bookInfoMarkup({\n            _id,\n            book_image,\n            title,\n            author,\n            description,\n            buy_links,\n        }) {\n            const amazonUrl = buy_links[0].url;\n            const appleUrl = buy_links[1].url;\n            const bookShopUrl = buy_links[0].url;\n            return `\n            <div class=\"shoplist-item\">\n                <div class=\"book-container\">\n                    <div class=\"book-img-container\">\n                         <img class='book-img' src=\"${book_image\n                         ? book_image\n                          : './src/images/without-Image/noImage-Large.png'\n                            }\" alt='Book image'>\n            </div>\n        <div class='book-descr-inf'>\n        <p class='book-title'>${title ? title : 'No title.'}</p>\n        <p class='book-author'>${author ? author : 'No author.'}</p>\n        <p class='book-description-shoplist'>${description ? description : 'No description.'\n                }</p>\n                </div>\n        <div class='links-group'>\n        <a href=${amazonUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${amazon}' srcset=\"${amazon} 1x, ${amazon2x} 2x\" alt ='Amazon Icon'></a>\n        <a href=${appleUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${apple}' srcset=\"${apple} 1x, ${apple2x} 2x\" alt ='Apple Icon'></a>\n        <a href=${bookShopUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${bookShop}' srcset=\"${bookShop} 1x, ${bookShop2x} 2x\" alt ='Book Shop Icon'></a>\n        </div>\n        <button class='deliteBookFromShopList 'data-name='${_id}' type='button'> \n        <svg class=\"trash-btn__icon\" width=\"28\" height=\"28\">\n        <use href=\"${icons}#delete-book\"></use>\n      </svg>\n        \n       </button>\n        \n        </div>\n        </div>\n       `;\n        }\n    }\n\n       function addDeleteHandler(id) {\n      const deleteBtn = document.querySelector(`[data-name=\"${id}\"]`);\n      deleteBtn.addEventListener('click', () => deliteBookFromShopingList(id));\n    }\n    \n    function deliteBookFromShopingList(bookIdForDelite) {\n      console.log('this', bookIdForDelite);\n      const idsInLocalStarage = JSON.parse(localStorage.getItem(LOCAL_KEY));\n      console.log(idsInLocalStarage);\n      const deliteID = idsInLocalStarage.filter(id => id !== bookIdForDelite);\n      console.log('array', deliteID);\n      const newLocalStorage = localStorage.setItem(\n        LOCAL_KEY,\n        JSON.stringify(deliteID)\n      );\n      location.reload();\n    }\n  }\n}\nShoppingListPageMarkup();\n\n\n","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"iPMid\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"9D2Qv\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"dTkHT\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"hyzQv\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"fnrpS\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"bS23T\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"dGKkA\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"6mEwM\");","module.exports = require('./helpers/bundle-url').getBundleURL('jSFKT') + require('./helpers/bundle-manifest').resolve(\"410VS\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$bpxeT","$ae93ac71dffb2662$exports","getBundleURL","resolve","$af2f28455afb8923$exports","$d9838d1ec4161a68$exports","$41f068a61eab178d$exports","$2b9ea7fb6683c564$exports","$36ccb301a405af05$exports","$97f4472a589935a4$exports","$d1144c10f1780b3e$exports","$1fac8f97b5ca9133$exports","$ccd8a3aa9cf007e8$var$LOCAL_KEY","$ccd8a3aa9cf007e8$var$_ShoppingListPageMarkup","$parcel$interopDefault","$2TvXO","mark","_callee1","shoppingListPageView","idsFromLocalStorage1","markup1","page1","pageSize","numberOfPages1","renderPagination","renderBookItems","addDeleteHandler","deliteBookFromShopingList","numberOfPages","paginationBtn","document","querySelector","pagination","pageBtn","concat","markupBtn","innerHTML","addEventListener","currentPage","querySelectorAll","forEach","btn","Number","dataset","page","idsFromLocalStorage","end","start","onePage","slice","console","log","_callee","books","markup","$6fhvM","booksId","_ctx","sent","_id","book_image","title","author","description","buy_links","amazonUrl","appleUrl","bookShopUrl","param","insertAdjacentHTML","bookIdForDelite","idsInLocalStarage","localStorage","getItem","deliteID","filter","setItem","stringify","location","reload","Math","ceil","apply","this","arguments","$ccd8a3aa9cf007e8$var$ShoppingListPageMarkup"],"version":3,"file":"shopping-list.29182f35.js.map"}