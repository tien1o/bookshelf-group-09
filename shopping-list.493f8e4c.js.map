{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-bdaebc5a03531898.js","src/js/script-shopping-list.js","node_modules/@parcel/runtime-js/lib/runtime-4d72bc8477050f69.js","node_modules/@parcel/runtime-js/lib/runtime-361070f63fb5deb1.js","node_modules/@parcel/runtime-js/lib/runtime-f43804e610e291ac.js","node_modules/@parcel/runtime-js/lib/runtime-6b9dee0fc9ba4fc8.js","node_modules/@parcel/runtime-js/lib/runtime-332a1c4920575761.js","node_modules/@parcel/runtime-js/lib/runtime-9489bd37b5f7df61.js","node_modules/@parcel/runtime-js/lib/runtime-a799bd073b85539b.js","node_modules/@parcel/runtime-js/lib/runtime-0a51626a173ecec6.js","node_modules/@parcel/runtime-js/lib/runtime-44e7bd74d9a8b620.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"f9bx4\\\":\\\"shopping-list.493f8e4c.js\\\",\\\"8DrZi\\\":\\\"empty.e85449c5.png\\\",\\\"lHxGi\\\":\\\"empty@2x.0c63d3b6.png\\\",\\\"azb7q\\\":\\\"amazon.06fa7713.png\\\",\\\"fS0QX\\\":\\\"amazon@2x.4eae58f9.png\\\",\\\"lLZQs\\\":\\\"book.57ecc8dc.png\\\",\\\"7W0St\\\":\\\"book@2x.c5385d25.png\\\",\\\"68qT8\\\":\\\"book-shop.e5effbae.png\\\",\\\"5K0oH\\\":\\\"book-shop@2.3b8922c8.png\\\",\\\"8OQ7p\\\":\\\"icons.375e7e79.svg\\\",\\\"5UbS1\\\":\\\"index.4d642a4d.css\\\",\\\"4l2W5\\\":\\\"index.bbd1bd77.js\\\"}\"));","import { booksId } from './apiBooks';\nimport emptybooks from '../images/shopping-list/empty.png';\nimport emptybooks2x from '../images/shopping-list/empty@2x.png';\nimport amazon from '../images/partners/amazon.png';\nimport amazon2x from '../images/partners/amazon@2x.png';\nimport apple from '../images/partners/book.png';\nimport apple2x from '../images/partners/book@2x.png';\nimport bookShop from '../images/partners/book-shop.png';\nimport bookShop2x from '../images/partners/book-shop@2.png';\nimport icons from '../images/icons.svg';\n\nconst LOCAL_KEY = 'booksID';\n\nasync function ShoppingListPageMarkup() {\n    const shoppingListPageView = document.querySelector(\n        '.shopping-list-page-view'\n    );\n\n    const value = localStorage.getItem(LOCAL_KEY);\n    const idsFromLocalStorage = JSON.parse(value);\n    \n    if (value === null || idsFromLocalStorage.length === 0) {\n        const markup = \n        `<div class=\"shoplist-list-background\">\n        <p class=\"shoplist-background-text\">\n        This page is empty, add some books and proceed to order.</p> \n        <img src='${emptybooks}' srcset=\"${emptybooks} 1x, ${emptybooks2x} 2x\" alt ='Empty books'> </div>`;\n        shoppingListPageView.insertAdjacentHTML('beforeend', markup);\n    } else {\n        console.log(idsFromLocalStorage);\n\n    let page = 1;\n    let pageSize = 3;\n    const numberOfPages = Math.ceil(idsFromLocalStorage.length / 3);\n    console.log(numberOfPages);\n    renderPagination(numberOfPages);\n    renderBookItems(idsFromLocalStorage, page);\n\n    function renderPagination(numberOfPages) {\n      if (numberOfPages === 1) {\n        return;\n      } else {\n        const paginationBtn = document.querySelector('.pagination-btn');\n        let pagination = '';\n        for (let i = 1; i <= numberOfPages; i++) {\n          const pageBtn = `<button type='button' class='page-btn' data-page=${i}> ${i} </button>`;\n          pagination = pagination.concat(pageBtn);\n        }\n        const markupBtn = `\n                <button type='button' class='prev-btn'> < </button>\n                ${pagination}\n                <button type='button' class='next-btn'> > </button>\n              \n                `;\n        paginationBtn.innerHTML = markupBtn;\n        paginationBtn\n          .querySelector('.prev-btn')\n          .addEventListener('click', () => {\n            if (page !== 1) {\n              const currentPage = page - 1;\n              page = currentPage;\n              renderBookItems(idsFromLocalStorage, currentPage);\n            }\n          });\n        paginationBtn\n          .querySelector('.next-btn')\n          .addEventListener('click', () => {\n            if (page !== numberOfPages) {\n              const currentPage = page + 1;\n              page = currentPage;\n              renderBookItems(idsFromLocalStorage, currentPage);\n            }\n          });\n        paginationBtn.querySelectorAll('.page-btn').forEach(btn => {\n          btn.addEventListener('click', () => {\n            const currentPage = Number(btn.dataset.page);\n            page = currentPage;\n            renderBookItems(idsFromLocalStorage, currentPage);\n          });\n        });\n      }\n    }\n\n    function renderBookItems(idsFromLocalStorage, page) {\n      shoppingListPageView.innerHTML = '';\n      const end = page * pageSize;\n      const start = end - pageSize;\n      const onePage = idsFromLocalStorage.slice(start, end);\n      console.log(onePage);\n      const shoppongListBooks = onePage.forEach(async id => {\n            const books = await booksId(id);\n            console.log(books);\n            const markup = bookInfoMarkup(books);\n            shoppingListPageView.insertAdjacentHTML('beforeend', markup);\n            addDeleteHandler(id);\n        });\n\n        function bookInfoMarkup({\n            _id,\n            book_image,\n            title,\n            author,\n            description,\n            buy_links,\n        }) {\n            const amazonUrl = buy_links[0].url;\n            const appleUrl = buy_links[1].url;\n            const bookShopUrl = buy_links[0].url;\n            return `\n            <div class=\"shoplist-item\">\n                <div class=\"book-container\">\n                    <div class=\"book-img-container\">\n                         <img class='book-img' src=\"${book_image\n                         ? book_image\n                          : './src/images/without-Image/noImage-Large.png'\n                            }\" alt='Book image'>\n            </div>\n        <div class='book-descr-inf'>\n        <p class='book-title'>${title ? title : 'No title.'}</p>\n        <p class='book-author'>${author ? author : 'No author.'}</p>\n        <p class='book-description-shoplist'>${description ? description : 'No description.'\n                }</p>\n                </div>\n        <div class='links-group'>\n        <a href=${amazonUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${amazon}' srcset=\"${amazon} 1x, ${amazon2x} 2x\" alt ='Amazon Icon'></a>\n        <a href=${appleUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${apple}' srcset=\"${apple} 1x, ${apple2x} 2x\" alt ='Apple Icon'></a>\n        <a href=${bookShopUrl} class='book-links-shoplist' target=\"_blank\"> <img  src='${bookShop}' srcset=\"${bookShop} 1x, ${bookShop2x} 2x\" alt ='Book Shop Icon'></a>\n        </div>\n        <button class='deliteBookFromShopList 'data-name='${_id}' type='button'> \n        <svg class=\"trash-btn__icon\" width=\"28\" height=\"28\">\n        <use href=\"${icons}#delete-book\"></use>\n      </svg>\n        \n       </button>\n        \n        </div>\n        </div>\n       `;\n        }\n    }\n\n       function addDeleteHandler(id) {\n      const deleteBtn = document.querySelector(`[data-name=\"${id}\"]`);\n      deleteBtn.addEventListener('click', () => deliteBookFromShopingList(id));\n    }\n    \n    function deliteBookFromShopingList(bookIdForDelite) {\n      console.log('this', bookIdForDelite);\n      const idsInLocalStarage = JSON.parse(localStorage.getItem(LOCAL_KEY));\n      console.log(idsInLocalStarage);\n      const deliteID = idsInLocalStarage.filter(id => id !== bookIdForDelite);\n      console.log('array', deliteID);\n      const newLocalStorage = localStorage.setItem(\n        LOCAL_KEY,\n        JSON.stringify(deliteID)\n      );\n      location.reload();\n    }\n  }\n}\nShoppingListPageMarkup();\n\n\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8DrZi\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lHxGi\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"azb7q\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fS0QX\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lLZQs\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7W0St\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"68qT8\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5K0oH\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8OQ7p\")).toString();"],"names":["parcelRequire","register","JSON","parse","$1X6yp","$7bed694ef1580b4a$exports","URL","resolve","import","meta","url","toString","$feba979dcc338be8$exports","$cca386eea4e4f9fb$exports","$f29d469ba5a39f9d$exports","$5a96558ac3e49cf6$exports","$47859cc8471de495$exports","$cc7c4c6d145696d1$exports","$de056baf34fd0a20$exports","$e27edc6dc33d0133$exports","async","shoppingListPageView","document","querySelector","value","localStorage","getItem","idsFromLocalStorage1","length","markup","$parcel$interopDefault","insertAdjacentHTML","console","log","page1","pageSize","numberOfPages1","Math","ceil","renderBookItems","idsFromLocalStorage","page","innerHTML","end","start","onePage","slice","forEach","id","books","booksId","_id","book_image","title","author","description","buy_links","amazonUrl","appleUrl","bookShopUrl","bookInfoMarkup","addEventListener","bookIdForDelite","idsInLocalStarage","deliteID","filter","setItem","stringify","location","reload","deliteBookFromShopingList","addDeleteHandler","numberOfPages","paginationBtn","pagination","i","pageBtn","concat","markupBtn","currentPage","querySelectorAll","btn","Number","dataset","renderPagination","$6d6839d600159769$var$ShoppingListPageMarkup"],"version":3,"file":"shopping-list.493f8e4c.js.map"}